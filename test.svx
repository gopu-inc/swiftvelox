// test.svx
// Fichier de test pour SwiftVelox v4.0.0

print("üß™ D√©marrage des tests SwiftVelox...");

// ===== TEST 1: Variables =====
print("\n" + BLUE + "[TEST 1] Variables" + NC);
let a = 10;
let b = 20;
print("a =", a);
print("b =", b);
print("a + b =", a + b);

let nom = "SwiftVelox";
print("Nom:", nom);
print("Bonjour " + nom + "!");

// ===== TEST 2: Op√©rations arithm√©tiques =====
print("\n" + BLUE + "[TEST 2] Op√©rations arithm√©tiques" + NC);
print("5 + 3 =", 5 + 3);
print("10 - 4 =", 10 - 4);
print("6 * 7 =", 6 * 7);
print("15 / 3 =", 15 / 3);
print("17 % 5 =", 17 % 5);

let x = 100;
let y = 50;
print("x - y =", x - y);

// ===== TEST 3: Bool√©ens et comparaisons =====
print("\n" + BLUE + "[TEST 3] Bool√©ens et comparaisons" + NC);
let vrai = true;
let faux = false;
print("vrai:", vrai);
print("faux:", faux);
print("!vrai =", !vrai);
print("!faux =", !faux);

print("5 == 5:", 5 == 5);
print("5 == 6:", 5 == 6);
print("10 != 5:", 10 != 5);
print("7 < 10:", 7 < 10);
print("7 > 10:", 7 > 10);

// ===== TEST 4: Structures de contr√¥le =====
print("\n" + BLUE + "[TEST 4] Structures de contr√¥le" + NC);

// IF/ELSE
let age = 25;
if (age >= 18) {
    print("Personne majeure");
} else {
    print("Personne mineure");
}

// WHILE
let compteur = 1;
print("Compte de 1 √† 5:");
while (compteur <= 5) {
    print("  compteur =", compteur);
    compteur = compteur + 1;
}

// ===== TEST 5: Fonctions =====
print("\n" + BLUE + "[TEST 5] Fonctions" + NC);

// Fonction simple
fn dire_bonjour() {
    print("Bonjour depuis une fonction!");
}
dire_bonjour();

// Fonction avec param√®tres
fn addition(x, y) {
    return x + y;
}
print("addition(7, 8) =", addition(7, 8));

// Fonction avec condition
fn est_pair(n) {
    if (n % 2 == 0) {
        return true;
    } else {
        return false;
    }
}
print("est_pair(10):", est_pair(10));
print("est_pair(7):", est_pair(7));

// Fonction r√©cursive
fn factorielle(n) {
    if (n <= 1) {
        return 1;
    } else {
        return n * factorielle(n - 1);
    }
}
print("factorielle(5) =", factorielle(5));

// ===== TEST 6: Port√©e des variables =====
print("\n" + BLUE + "[TEST 6] Port√©e des variables" + NC);
let globale = 100;

fn test_portee() {
    let locale = 50;
    print("  locale dans fonction:", locale);
    print("  globale dans fonction:", globale);
}

test_portee();
// print("locale hors fonction:", locale); // Devrait √©chouer si d√©comment√©

// ===== TEST 7: Fonctions natives =====
print("\n" + BLUE + "[TEST 7] Fonctions natives" + NC);
print("Heure actuelle:", time());
print("Nombre al√©atoire:", random());

// ===== TEST 8: Expressions complexes =====
print("\n" + BLUE + "[TEST 8] Expressions complexes" + NC);
let resultat = (5 + 3) * 2 - 4 / 2;
print("(5 + 3) * 2 - 4 / 2 =", resultat);

let condition_complexe = (10 > 5) && (3 < 7) || (8 == 8);
print("(10 > 5) && (3 < 7) || (8 == 8) =", condition_complexe);

// ===== TEST 9: Cha√Ænes de caract√®res =====
print("\n" + BLUE + "[TEST 9] Cha√Ænes de caract√®res" + NC);
let prenom = "Jean";
let message = "Bonjour " + prenom + ", bienvenue dans SwiftVelox!";
print(message);

let calcul_chaine = "R√©sultat: " + (5 + 3);
print(calcul_chaine);

// ===== TEST 10: Variables mutables =====
print("\n" + BLUE + "[TEST 10] Variables mutables" + NC);
var compteur_var = 1;
print("compteur_var initial:", compteur_var);
compteur_var = 2;
print("compteur_var modifi√©:", compteur_var);

// ===== TEST 11: Fonctions avec logique complexe =====
print("\n" + BLUE + "[TEST 11] Fonctions avec logique complexe" + NC);

fn est_premier(n) {
    if (n <= 1) {
        return false;
    }
    let i = 2;
    while (i * i <= n) {
        if (n % i == 0) {
            return false;
        }
        i = i + 1;
    }
    return true;
}

print("est_premier(2):", est_premier(2));
print("est_premier(17):", est_premier(17));
print("est_premier(20):", est_premier(20));

// ===== TEST 12: Boucles imbriqu√©es =====
print("\n" + BLUE + "[TEST 12] Boucles imbriqu√©es" + NC);
print("Table de multiplication de 2:");
let i = 1;
while (i <= 3) {
    let j = 1;
    while (j <= 3) {
        print("  2 *", i * j, "=", 2 * (i * j));
        j = j + 1;
    }
    i = i + 1;
}

// ===== TEST 13: Gestion d'erreurs =====
print("\n" + BLUE + "[TEST 13] Gestion d'erreurs" + NC);
print("Test division par z√©ro (devrait √©chouer):");
// let division = 10 / 0; // D√©commenter pour tester l'erreur

// ===== TEST 14: Fonctions comme valeurs =====
print("\n" + BLUE + "[TEST 14] Fonctions comme valeurs" + NC);

fn creer_multiplieur(facteur) {
    fn multiplier(n) {
        return n * facteur;
    }
    return multiplier;
}

let double = creer_multiplieur(2);
let triple = creer_multiplieur(3);

print("double(5) =", double(5));
print("triple(5) =", triple(5));

// ===== TEST 15: Exemple pratique =====
print("\n" + BLUE + "[TEST 15] Exemple pratique: Calculatrice" + NC);

fn calculatrice(operation, a, b) {
    if (operation == "+") {
        return a + b;
    } else if (operation == "-") {
        return a - b;
    } else if (operation == "*") {
        return a * b;
    } else if (operation == "/") {
        if (b == 0) {
            print("Erreur: Division par z√©ro");
            return 0;
        }
        return a / b;
    } else {
        print("Op√©ration non support√©e:", operation);
        return 0;
    }
}

print("10 + 5 =", calculatrice("+", 10, 5));
print("10 - 5 =", calculatrice("-", 10, 5));
print("10 * 5 =", calculatrice("*", 10, 5));
print("10 / 5 =", calculatrice("/", 10, 5));

// ===== TEST 16: Suite de Fibonacci =====
print("\n" + BLUE + "[TEST 16] Suite de Fibonacci" + NC);

fn fibonacci(n) {
    if (n <= 1) {
        return n;
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}

print("Fibonacci(0):", fibonacci(0));
print("Fibonacci(1):", fibonacci(1));
print("Fibonacci(5):", fibonacci(5));
print("Fibonacci(8):", fibonacci(8));

// ===== TEST 17: Constantes =====
print("\n" + BLUE + "[TEST 17] Constantes" + NC);
const PI = 3.14159;
const VITESSE_LUMIERE = 299792458;
print("PI =", PI);
print("Vitesse de la lumi√®re =", VITESSE_LUMIERE, "m/s");

// ===== TEST 18: Op√©rateurs logiques =====
print("\n" + BLUE + "[TEST 18] Op√©rateurs logiques" + NC);
let test1 = true && true;
let test2 = true && false;
let test3 = false || true;
let test4 = !true;
print("true && true =", test1);
print("true && false =", test2);
print("false || true =", test3);
print("!true =", test4);

// ===== TEST 19: Concat√©nation avanc√©e =====
print("\n" + BLUE + "[TEST 19] Concat√©nation avanc√©e" + NC);
let score = 95;
let nom_joueur = "Alice";
let message_score = "Joueur: " + nom_joueur + ", Score: " + score + ", Niveau: " + (score > 90 ? "Expert" : "D√©butant");
print(message_score);

// ===== TEST 20: Performance =====
print("\n" + BLUE + "[TEST 20] Test de performance" + NC);
let debut = time();
let somme = 0;
let k = 0;
while (k < 1000) {
    somme = somme + k;
    k = k + 1;
}
let fin = time();
let duree = fin - debut;
print("Somme des 1000 premiers nombres:", somme);
print("Temps d'ex√©cution:", duree, "secondes");

// ===== FIN DES TESTS =====
print("\n" + GREEN + "‚úÖ Tous les tests sont termin√©s avec succ√®s!" + NC);
print(GREEN + "‚ú® SwiftVelox fonctionne parfaitement!" + NC);
